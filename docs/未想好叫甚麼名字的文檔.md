# MyCourses

## 實體類設計(部份)

### 學生（StudentEntity）

#### 屬性

| 中文 | 英文      | 描述                                                         |
| ---- | --------- | ------------------------------------------------------------ |
| 郵箱 | email     | 只能用NJU郵箱登陸，即@smail.nju.cn作為後綴，前綴則任意3-9位數字和字母組合，不能重覆 |
| 密碼 | password  | 6-9位字母、數字和符號組合。不能包含空白字符，需有至少一位大寫字母，一位數字和一位符號。大小寫敏感 |
| 姓名 | name      | 學生姓名，僅中文，可重覆                                     |
| 學號 | studentNo | 9位數字，不可重覆                                            |
| 注消 | isDeleted | 是否已被注銷                                                 |
|      |           |                                                              |

### 教師（TeacherEntity）

#### 屬性

| 中文   | 英文      | 描述                                                         |
| ------ | --------- | ------------------------------------------------------------ |
| 郵箱   | email     | 只能用NJU郵箱登陸，即@smail.nju.cn作為後綴，前綴則任意3-9位數字和字母組合，不能重覆 |
| 密碼   | password  | 6-9位字母、數字和符號組合。不能包含空白字符，需有至少一位大寫字母，一位數字和一位符號。大小寫敏感 |
| 姓名   | name      | 學生姓名，僅中文，可重覆                                     |
| 職員號 | teacherNo | 9位數字，不可重覆                                            |
|        |           |                                                              |

###課程（CourseEntity）

#### 屬性

| 中文       | 英文        | 描述                 |
| ---------- | ----------- | -------------------- |
| 課程號     | cId         | 課程的編號，不可重覆 |
| 名稱       | name        | 12個中文字內的課程   |
| 授課老師   | teacher     | /                    |
| 課件       | sildes      | 已上傳的課件列表     |
| 作業       | assignments | 已佈置的作業列表     |
| 成績報告單 | reportCard  | 已選課的學生的成績   |
| 論壇       | forums      | 已開放的論壇列表     |
|            |             |                      |

### 發佈（Releasement）

#### 屬性

| 中文     | 英文                | 描述                                                 |
| -------- | ------------------- | ---------------------------------------------------- |
| 發佈號   | rid                 | 課程發佈紀錄的編號，不可重覆                         |
| 課程     | course              | 發佈的課程實體類                                     |
| 上課時間 | startHour，startMin | 課程的上課小時和分鐘                                 |
| 下課時間 | endHour，endMin     | 課程的下課小時和分鐘                                 |
| 班次     | repeatAfterNDay     | 隔多少天重覆一次課程                                 |
| 生效時間 | effectiveDate       | 課程生效日期，即第一天開始上課的日期                 |
| 失效時間 | deadDate            | 課程失效日期，即最後一天上課的日期，注意需與班次配合 |
| 限選人數 | limitNumber         | 課程選課人數的上限                                   |
|          |                     |                                                      |

## 數據庫設計

### 學生（StudentEntity）

```sql
create table student_entity (
	`email` varchar(20) primary key,
    `password` varchar(12) not null,
    `name` varchar(30) not null,
    `student_no` int(10) not null,
    `is_deleted` boolean unique
);
```



### 教師（TeacherEntity）

```sql
create table teacher_entity (
	`email` varchar(20) primary key,
    `password` varchar(12) not null,
    `name` varchar(30) not null,
    `teacher_no` int(10) unique
);
```



### 課件（SlideEntity）

```sql
create table slide_entity (
	`sid` int(10) primary key auto_increment,
    `title` varchar(100) not null, 
    `file_path` varchar(100) not null
);
```



### 評論（CommentEntity）

```sql
create table comment_entity (
    `cmid` int(10) primary key auto_increment,
    `content` varchar(1000) not null,
    `commentByEmail` varchar(20) not null
);
```



###  作業（AssignmentEntity）

```sql
create table assignment_entity (
	`assid` int(10) primary key auto_increment,
    `title` varchar(20) not null,
    `description` varchar(100),
    `sid` int(10)
);
```



###  成績單（ReportCardEntity）

```sql
create table report_card_item (
	`student_no` varchar(10) primary key,
    `score` double(10, 2) not null,
    `rcid` int(10) not null
);

create table report_card_entity (
	`rcid` int(10) primary key auto_increment,
);
```



### 課程（CourseEntity）

```sql
create table course_entity (
	`cid` int(10) primary key auto_increment,
    `name` varchar(20) not null,
    `teacher_no` int(10) unique,
    `rcid` int
)
```



## 數據層（DAO Layer）

### 接口

#### IGeneralDaoService<T>

- void create(T t)：添加數據
- List<T> retrieveAll()：返回所有列表
- List<T> retrieve(RetrieveOptions<T> options)：返回符合要求的數據列表
- void logicalDelete(T t)：邏輯刪除
- void physicalDelete(T t)：物理刪除



### 其它輔助類

#### RetrieveOptions<T>

##### 屬性

- List<RetrieveOption> optionList

##### 方法

- Boolean match(T t)

###  RetrieveOption

#### 屬性

- String attribute
- Object value1
- Object value2
- RelationEnum relation

### RelationEnum

#### 值

- Between
- Equal
- LessEqual
- Less
- GreaterEqual
- Greater
- NotEqual



###  異常

- error.dao.NoValue2DoingBetween





